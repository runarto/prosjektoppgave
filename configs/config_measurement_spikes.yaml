# Realistic space-grade configuration WITH LARGE spikes
# Tests filter robustness and outlier rejection

time:
  process_dt: 0.02
  sim_dt: 0.02
  sim_T: 3000.0               # 50 minutes
  start_jd: 2459980.5

sensors:
  gyro:
    dt: 0.02                  # 50 Hz
    noise:
      gyro_std: 1.0e-6        # rad/s, fiber optic gyro white noise
      noise_rw: 1.0e-7        # rad/sqrt(s), small random walk
      arw_deg: 0.001          # deg/sqrt(hr), excellent FOG
      bias_instability_deg_per_h: 0.01  # deg/h, typical FOG bias drift
    scaling:
      noise_scale: 1.0

  mag:
    mag_std: 1.0e-7           # nT-level accuracy (realistic space magnetometer)
    dt: 0.1                   # 10 Hz (realistic rate)

    bias_rw_std: 1.0e-9       # Very slow bias drift
    bias_init: [1.0e-8, 1.0e-8, 1.0e-8]
    hard_iron: [0.0, 0.0, 0.0]
    soft_iron:
      - [1.00, 0.00, 0.00]
      - [0.00, 1.00, 0.00]
      - [0.00, 0.00, 1.00]

    spikes:
      enabled: true
      magnitude: 5.0e-5       # 500x nominal noise - LARGE spike
      probability: 0.005      # 0.5% of measurements (1 in 200)

  sun:
    dt: 1.0                   # 1 Hz (typical for fine sun sensors)
    fov_deg: 120.0            # Realistic FOV

    bias:
      rw_std: 1.0e-9
      init: [1.0e-7, 1.0e-7, 1.0e-7]

    noise:
      sun_std: 1.0e-4         # ~0.006° (typical fine sun sensor)

    dropout:
      probability: 0.02       # 2% dropout (occasional occlusion/eclipse)
      use_measurements: true

    spikes:
      enabled: true
      magnitude: 1.0e-2       # 100x nominal noise - LARGE spike
      probability: 0.005      # 0.5% of measurements

    scaling:
      noise_scale: 1.0

  star:
    dt: 0.5                   # 2 Hz (typical star tracker rate)

    noise:
      st_std: 5.0e-6          # rad (~1 arcsecond, excellent star tracker)

    bias:
      rw_std: 1.0e-10
      init: [1.0e-8, 1.0e-8, 1.0e-8]

    dropout:
      probability: 0.05       # 5% dropout (occasional lost lock)
      use_measurements: true
      max_rate_deg_s: 5.0     # Lost during fast maneuvers

    spikes:
      enabled: true
      angle: 0.3              # ~17° attitude error spike - VERY LARGE
      probability: 0.005      # 0.5% of measurements

    scaling:
      noise_scale: 1.0

process_model:
  dt: 0.02

omega_profile:
  # Realistic satellite motion with occasional maneuvers
  amplitude:
    x: 0.02                   # rad/s (~1°/s typical slew)
    y: 0.01
    z: 0.015
  frequency:
    x: 0.01                   # Hz
    y: 0.008
    z: 0.005

simulation:
  run_name: "measurement_spikes"
